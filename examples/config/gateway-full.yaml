# go-rpc-gateway 完整配置示例
# 展示如何使用 go-config 标准配置

# 使用 go-config 标准的服务器配置
server:
  endpoint: ":8080"
  server-name: "go-rpc-gateway"
  data-driver: "memory"
  handle-method-not-allowed: false
  context-path: "/"
  language: "zh-cn"

# 使用 go-config 标准的 CORS 配置
cors:
  allowed-origins:
    - "*"
  allowed-methods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
    - "OPTIONS"
  allowed-headers:
    - "Origin"
    - "Content-Length"
    - "Content-Type"
    - "Authorization"
  max-age: "86400"
  allowed-all-origins: true
  allow-credentials: true
  options-response-code: 200

# 使用 go-config 标准的 JWT 配置
jwt:
  signing-key: "go-rpc-gateway-secret-key"
  expires-time: 3600
  buffer-time: 300
  use-multipoint: false

# 使用 go-config 标准的缓存配置
cache:
  module_name: "cache"
  type: "memory"
  enabled: true
  key_prefix: "gateway:"
  serializer: "json"
  memory:
    module_name: "memory"
    capacity: 1000
    cleanup_size: 50
    max_size: 10000

# 使用 go-config 标准的 PProf 配置
pprof:
  enabled: true
  path_prefix: "/debug/pprof"
  require_auth: false
  allowed_ips: []

# 使用 go-config 标准的 Jaeger 配置
jaeger:
  type: "const"
  param: 1
  log-spans: false
  endpoint: "http://localhost:14268/api/traces"
  service: "go-rpc-gateway"

# 使用 go-config 标准的 Zap 日志配置
zap:
  level: "info"
  format: "console"
  prefix: "[GO-RPC-GATEWAY]"
  director: "logs"
  max-size: 100
  max-age: 7
  max-backups: 5
  compress: true
  show-line: true
  encode-level: "LowercaseColorLevelEncoder"
  stacktrace-key: "stacktrace"
  log-in-console: true
  development: true

# Gateway 特有配置
gateway:
  name: "go-rpc-gateway"
  version: "v1.0.0"
  environment: "production"
  debug: false
  
  http:
    host: "0.0.0.0"
    port: 8080
    read_timeout: 30
    write_timeout: 30
    idle_timeout: 120
    max_header_bytes: 1048576
    enable_gzip_compress: true
  
  grpc:
    host: "0.0.0.0"
    port: 9090
    network: "tcp"
    max_recv_msg_size: 4194304
    max_send_msg_size: 4194304
    connection_timeout: 30
    keepalive_time: 60
    keepalive_timeout: 30
    enable_reflection: true
  
  health_check:
    enabled: true
    path: "/health"
    interval: 30

# 中间件配置
middleware:
  rate_limit:
    enabled: true
    algorithm: "token_bucket"
    rate: 100
    burst: 200
    window_size: 60
  
  access_log:
    enabled: true
    format: "json"
    include_body: false
    include_headers: false
  
  signature:
    enabled: false
    algorithm: "hmac-sha256"
    secret_key: "your-signature-secret"
    skip_paths:
      - "/health"
      - "/metrics"
    ttl: 300

# 监控配置
monitoring:
  metrics:
    enabled: true
    path: "/metrics"
    port: 9100
    namespace: "gateway"
    subsystem: "rpc"
  
  tracing:
    enabled: false
    service_name: "go-rpc-gateway"
    endpoint: "http://localhost:14268/api/traces"
    sample_rate: 0.1

# 安全配置
security:
  tls:
    enabled: false
    cert_file: ""
    key_file: ""
    ca_file: ""
  
  policy:
    enable_csrf_protection: false
    enable_xss_protection: true
    content_type_no_sniff: true
    frame_options: "DENY"