# 简化配置文件 - 确保健康检查可用
# 这是一个最小但完整的配置示例

# Gateway 核心配置
gateway:
  name: "IM-Push-Service"
  version: "v1.0.0"
  environment: "development"
  debug: true

  # HTTP 服务器
  http:
    host: "0.0.0.0"
    port: 8080
    read_timeout: 30
    write_timeout: 30
    idle_timeout: 120

  # gRPC 服务器
  grpc:
    host: "0.0.0.0"
    port: 9090
    max_recv_msg_size: 4194304
    max_send_msg_size: 4194304
    enable_reflection: true

  # ⚠️ 健康检查 - 必须显式启用
  health_check:
    enabled: true              # 必须设置为 true
    path: "/health"            # 健康检查路径
    interval: 30               # 检查间隔（秒）
    
    # Redis 健康检查（可选）
    redis:
      enabled: false
      host: "localhost"
      port: 6379
      timeout: 5
    
    # MySQL 健康检查（可选）
    mysql:
      enabled: false
      host: "localhost"
      port: 3306
      database: "im_service"
      timeout: 5

# 中间件配置
middleware:
  # 访问日志
  access_log:
    enabled: true
    format: "json"

  # 限流
  rate_limit:
    enabled: true
    rate: 100
    burst: 200

# 监控配置
monitoring:
  # Prometheus 指标
  metrics:
    enabled: true
    path: "/metrics"

# 日志配置
zap:
  level: "info"
  prefix: "[IM-Push]"
  format: "console"
  director: "logs"
  show_line: true
  log_in_console: true
  development: true

# CORS 配置
cors:
  allowed_origins: ["*"]
  allowed_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  allowed_headers: ["*"]
  allowed_all_origins: true
  allow_credentials: true

# 数据库配置（如果需要）
# mysql:
#   host: "localhost"
#   port: 3306
#   dbname: "im_service"
#   username: "root"
#   password: "password"
#   max_idle_conns: 10
#   max_open_conns: 100

# Redis 配置（如果需要）
# redis:
#   host: "localhost"
#   port: 6379
#   password: ""
#   db: 0
#   pool_size: 10
